<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ðŸŽ¬ Movie Network Explorer</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { background: #121212; color: #f1f1f1; font-family: Arial, sans-serif; }
.container { margin-top: 50px; }
.card { background: #1e1e1e; border-radius: 12px; padding: 20px; margin-bottom: 20px; }
.btn-custom { background: #e50914; color: white; }
.btn-custom:hover { background: #f6121d; }
.actor-link { cursor: pointer; color: #ffcc00; text-decoration: underline; }
#actor-movies { margin-top: 20px; }
.fade-in { animation: fadeIn 0.7s ease-in; }
@keyframes fadeIn { from {opacity:0; transform: translateY(20px);} to {opacity:1; transform: translateY(0);} }
</style>
</head>
<body>
<div class="container">
<h1 class="text-center mb-4">ðŸŽ¬ Movie Network Explorer</h1>
<form method="POST" class="d-flex justify-content-center mb-4">
  <input type="text" name="movie_name" placeholder="Enter a movie name..." class="form-control w-50 me-2" required>
  <button type="submit" class="btn btn-custom">Search</button>
</form>

{% if movie_info %}
<div class="card fade-in">
  <h3>{{ movie_info.input_movie }}</h3>
  <p><strong>Director:</strong> {{ movie_info.director }}</p>
  <p><strong>Actors:</strong> 
    {% for actor in movie_info.actors %}
      <span class="actor-link" onclick="fetchActorMovies({{ actor.id }}, '{{ actor.name }}')">{{ actor.name }}</span>{% if not loop.last %}, {% endif %}
    {% endfor %}
  </p>
</div>

<div class="card fade-in">
<h4>Related Movies (same director or actor)</h4>
<table class="table table-dark table-striped mt-3">
<thead><tr><th>#</th><th>Movie Title</th><th>Connection</th></tr></thead>
<tbody>
{% for m in movie_info.related_movies %}
<tr><td>{{ loop.index }}</td><td>{{ m.title }}</td><td>{{ m.connection }}</td></tr>
{% endfor %}
</tbody>
</table>
</div>

<div id="actor-movies" class="card fade-in" style="display:none;">
<h4 id="actor-title"></h4>
<table class="table table-dark table-striped mt-3" id="actor-table">
<thead><tr><th>#</th><th>Movie Title</th><th>Release Date</th></tr></thead>
<tbody></tbody>
</table>
</div>
{% endif %}
</div>

<script>
function fetchActorMovies(actorId, actorName){
    fetch(`/actor-movies/${actorId}`)
    .then(resp => resp.json())
    .then(data=>{
        document.getElementById("actor-movies").style.display="block";
        document.getElementById("actor-title").innerText=`Movies of ${actorName}`;
        const tbody = document.querySelector("#actor-table tbody");
        tbody.innerHTML="";
        data.forEach((m,i)=>{
            tbody.innerHTML += `<tr><td>${i+1}</td><td>${m.title}</td><td>${m.release_date}</td></tr>`;
        });
        window.scrollTo({ top: document.getElementById("actor-movies").offsetTop, behavior: 'smooth' });
    });
}
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
